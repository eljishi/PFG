<app-header [pageTitle]="'Calendario'"></app-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="calendario-container">
    <ion-datetime 
      presentation="date" 
      [showDefaultButtons]="true" 
      doneText="Seleccionar" 
      cancelText="Cancelar"
      (ionChange)="onFechaSeleccionada($event)">
    </ion-datetime>
  </div>

  @if (fechaSeleccionada) {
    <div class="entrenamientos-container">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Entrenamientos para {{ fechaSeleccionada | date:'dd/MM/yyyy' }}</ion-card-title>
        </ion-card-header>
        
        <ion-card-content>
          @if (cargando) {
            <div class="ion-text-center">
              <p>Cargando entrenamientos...</p>
            </div>
          }
          
          @if (!cargando && entrenamientosDelDia.length === 0) {
            <div>
              <p>No hay entrenamientos programados para esta fecha.</p>
            </div>
          }
          
          @if (!cargando && entrenamientosDelDia.length > 0) {
            <ion-list>
              @for (entrenamiento of entrenamientosDelDia; track $index) {
                <ion-item button 
                        detail="true"
                        (click)="verDetalleEntrenamiento(entrenamiento)">
                  <ion-label>
                    <h2>{{ entrenamiento.titulo }}</h2>
                    <p>{{ entrenamiento.descripcion || 'Sin descripci√≥n' }}</p>
                    @if (entrenamiento.ejercicios) {
                      <p>Ejercicios: {{ entrenamiento.ejercicios.length }}</p>
                    }
                  </ion-label>
                </ion-item>
              }
            </ion-list>
          }
        </ion-card-content>
      </ion-card>
    </div>
  }
</ion-content>
